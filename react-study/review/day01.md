## π› MSW
> `MSW(Mock Service Worker)`λ” κ°€μ§ APIλ¥Ό λ§λ“¤μ–΄ fetch μ”μ²­μ„ κ°€λ΅μ±„μ„ μ‘λ‹µμ„ λ°ν™ν•΄μ£Όλ” λΌμ΄λΈλ¬λ¦¬λ‹¤.

**μ„¤μΉ**

``` bash
npm install msw@1
```
μµμ‹  λ²„μ „μ€ CommonJS ν•μ‹μΌλ΅ μ‘μ„±ν•΄μ¤μ•Όν•κΈ° λ•λ¬Έμ— μ΄μ „ λ²„μ „μΌλ΅ μ„¤μΉν–λ‹¤.

### μ™ ν•„μ”ν• κΉ?
- λ°±μ—”λ“κ°€ μ—†μ„ λ•λ„ κ°λ°μ„ κ°€λ¥ν•κ² ν•λ‹¤.
- ν…μ¤νΈ μ‹ μ„λ²„ μ—†μ΄λ„ μ‹λ‚λ¦¬μ¤ μ¬ν„μ΄ κ°€λ¥ν•λ‹¤.
- fetch, axios λ“± μ‹¤μ  λ„¤νΈμ›ν¬ μ”μ²­μ„ μ“°λ“―μ΄ μ½”λ“ μ‘μ„±μ΄ κ°€λ¥ν•λ‹¤.

### handlerμ™€ browser

**handler**: μ–΄λ–¤ μ”μ²­μ„ κ°€λ΅μ±μ§€ μ •μ
```ts
rest.get("/api/users", (req, res, ctx) => {
  return res(
    ctx.status(200),
    ctx.json([
      λ°ν™ν•  λ°μ΄ν„°
    ])
  )
})
```

**browser**: μ”μ²­μ„ κ°€λ΅μ±„λ” κ°€μ§ μ„λ²„ μ‹¤ν–‰ μ„¤μ •
```ts
export const worker = setupWorker(...handlers);
```

- setupWorker: λΈλΌμ°μ €μ—μ„ λ™μ‘ν•λ” κ°€μ§ μ„λΉ„μ¤ μ›μ»¤λ¥Ό μ„¤μ •ν•λ‹¤.
- λ‚΄λ¶€μ μΌλ΅ Service Worker APIλ¥Ό μ΄μ©ν•΄ λΈλΌμ°μ € λ λ²¨μ—μ„ fetch μ”μ²­μ„ κ°€λ΅μ±λ‹¤.

```tsx
if (import.meta.env.DEV) {
  const { worker } = await import('./browser.ts');
  await worker.start();
}
```

- μ•±μ μ§„μ… μ μ— ν•΄λ‹Ή μ½”λ“λ¥Ό μ‘μ„±ν•΄μ¤€λ‹¤.
- κ°λ° λ¨λ“μ—μ„ μ„λΉ„μ¤ μ›μ»¤λ¥Ό μ‹¤ν–‰ν•λ” μ½”λ“μ΄λ‹¤.

### MSWμ—μ„ λ‹¤μ–‘ν• μΏΌλ¦¬ νλΌλ―Έν„°μ— λ€ν• μ‘λ‹µ μ²λ¦¬
> μ”μ²­μ—μ„ μΏΌλ¦¬ νλΌλ―Έν„°λ¥Ό μ½μ–΄ μ •λ ¬ν•΄μ¤„ μ μλ‹¤.

ν΄λΌμ΄μ–ΈνΈκ°€ λ‹¤μκ³Ό κ°™μ΄ μ”μ²­μ„ λ³΄λ‚Έλ‹¤.

```bash
GET /api/users?sort=name&order=asc
```

μ μ € μ •λ³΄λ¥Ό μ΄λ¦„ μμΌλ΅ μ¤λ¦„μ°¨μ μ •λ ¬λ΅ κ°€μ Έμ¨λ‹¤.

```ts
rest.get("/api/users", (req, res, ctx) => {
  const sort = req.url.searchParams.get("sort");
  const order = req.url.searchParams.get("order");

  const sortedUsers = [...mockUsers].sort((a, b) => {
    if (sort === "name") {
      return order === "desc"
        ? b.name.localeCompare(a.name)
        : a.name.localeCompare(b.name);
    }
    return 0;
  });

  return res(ctx.status(200), ctx.json(sortedUsers));
});
```

### λ‹¤λ¥Έ λ„κµ¬μ™€μ μ°¨μ΄

1. fetch μ—†μ΄ μ§μ ‘ mock λ°μ΄ν„°λ¥Ό μ‚¬μ©ν•λ” κ²½μ°
- fetchλ¥Ό μ‚¬μ©ν•μ§€ μ•κΈ° λ•λ¬Έμ— μ΄ν›„ API μ„λ²„κ°€ κ°λ°λκ³  λ‚λ©΄ μ½”λ“ μμ •μ„ ν•΄μ•Όν•λ‹¤.
- λΉ λ¥΄κ² ν™”λ©΄μ„ κ·Έλ¦΄ μ μλ‹¤λ” μ¥μ μ΄ μμ§€μ§€λ§, λ΅λ”©/μ—λ¬ μ²λ¦¬ λ“± λΉ„λ™κΈ° νλ¦„μ„ ν…μ¤νΈν•κΈ° μ–΄λ µλ‹¤.

2. lowdb
- λ„¤νΈμ›ν¬ λ λ²¨μ—μ„ μ”μ²­μ„ κ°€λ΅μ±„λ” κ²ƒμ΄ λ¶κ°€λ¥ν•λ‹¤.
- API μ„λ²„κ°€ μ•„λ‹κΈ° λ•λ¬Έμ— fetch μ”μ²­μ€ μ§μ ‘ μ„λ²„ μ½”λ“λ¥Ό μ‘μ„±ν•΄μ•Ό μ‚¬μ© κ°€λ¥ν•λ‹¤.
- ν΄λΌμ΄μ–ΈνΈμ™€ λ°”λ΅ μ—°κ²°μ€ μ–΄λ µκ³  Express λ“±κ³Ό ν•¨κ» μ‚¬μ©ν•΄μ•Ό μ μ©ν•λ‹¤.

3. json-server
- fetch μ”μ²­μ„ ν†µν•΄ μ‹¤μ  API μ”μ²­κ³Ό κ°™μ΄ μ‘μ„±ν•  μ μλ‹¤.
- λ³µμ΅ν• μ΅°κ±΄ λ΅μ§ κµ¬ν„μ΄ μ–΄λ ¤μ›, μ΅°κ±΄λ¶€ ν•„ν„°μ™€ κ°™μ€ μ”μ²­μ€ ν•  μ μ—†λ‹¤.
- ν…μ¤νΈν•  λ•λ§λ‹¤ μ„λ²„λ¥Ό λ„μ›μ•Όν•λ‹¤.

**MSW**
- fetch, axios κ·Έλ€λ΅ μ‚¬μ© κ°€λ¥ν•κΈ° λ•λ¬Έμ—, API κµμ²΄ μ‹ μ½”λ“ μμ •μ΄ μ—†λ‹¤.
- μ΅°κ±΄λ¶€ μ‘λ‹µ λ΅μ§μ„ μ‚¬μ©ν•  μ μλ‹¤.
- λ΅λ”©, μ—λ¬, νƒ€μ„μ•„μ›ƒ λ“± λ‹¤μ–‘ν• μƒν™©μ„ μ‹λ®¬λ μ΄μ… κ°€λ¥ν•λ‹¤.
- ν΄λΌμ΄μ–ΈνΈ μ½”λ“μ— κ°€μ§ μ„λ²„λ¥Ό λ¶™μ΄λ” κ²ƒμ²λΌ μ‘λ™ν•λ‹¤.
